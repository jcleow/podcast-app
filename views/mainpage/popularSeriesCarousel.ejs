<div id="popularSeriesCarousel" class="carousel slide mt-5" data-interval="false" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#popularSeriesCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#popularSeriesCarousel" data-slide-to="1"></li>
    <li data-target="#popularSeriesCarousel" data-slide-to="2"></li>
  </ol>

  <div class="carousel-inner">
    <div class="carousel-item carouselDiv">
      <div class="d-flex justify-content-center">
      <div class="card-deck pt-3">
        <div class = "row d-flex flex-row flex-nowrap overflow-auto justify-content-center">
          <div class = "col">
            <!-- Item one-->
            <div class="card cardSize">
              <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(series[0].artwork_filename) { %>
                style="background-image:url(<%=series[0].artwork_filename%>)"
                <% } %>
                action ='/'> 
                    <img class="card-img-top w-auto">
                  <a href="/series/<%=series[0].id%>" role="button" class="btn btn-primary mx-auto" type="submit">View</a>
              </form>
              <div class="card-body">
                <h5 class="card-title"><%=series[0].name%></h5>
                <p class="card-text"><%= truncateDescription(series[0].description)%></p>
              </div>
            </div>
          </div>

          <div class = "col">
            <!-- Item two-->
            <div class="card cardSize">
              <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(series[0].artwork_filename) { %>
                style="background-image:url(<%=series[0].artwork_filename%>)"
                <% } %>
                action ='/'> 
                    <img class="card-img-top w-auto">
                  <a href="/series/<%=series[0].id%>" role="button" class="btn btn-primary mx-auto" type="submit">View</a>
                  
              </form>
              <div class="card-body">
                <h5 class="card-title"><%=series[0].name%></h5>
                <p class="card-text"><%= truncateDescription(series[0].description)%></p>
              </div>
            </div>
          </div>

          <div class = "col">
            <!-- Item three-->
            <div class="card cardSize">
              <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(series[0].artwork_filename) { %>
                style="background-image:url(<%=series[0].artwork_filename%>)"
                <% } %>
                action ='/'> 
                    <img class="card-img-top w-auto">
                  <a href="/series/<%=series[0].id%>" role="button" class="btn btn-primary mx-auto" type="submit">View</a>
                  
              </form>
              <div class="card-body">
                <h5 class="card-title"><%=series[0].name%></h5>
                <p class="card-text"><%= truncateDescription(series[0].description)%></p>
              </div>
            </div>
          </div>

          <div class = "col">
            <!-- Item four-->
            <div class="card cardSize">
              <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(series[0].artwork_filename) { %>
                style="background-image:url(<%=series[0].artwork_filename%>)"
                <% } %>
                action ='/'> 
                    <img class="card-img-top w-auto">
                  <a href="/series/<%=series[0].id%>" role="button" class="btn btn-primary mx-auto" type="submit">View</a>
                  
              </form>
              <div class="card-body">
                <h5 class="card-title"><%=series[0].name%></h5>
                <p class="card-text"><%= truncateDescription(series[0].description)%></p>
              </div>
            </div>

          </div>
        </div> 
      </div>
      </div>      
    </div>
<% let i = 0 %>
<% while(i < series.length) { %>
<% if( i + 5 > series.length) { %>    
<div class="carousel-item carouselDiv">
  <div class="d-flex justify-content-center">
    <div class="card-deck pt-3">
      <div class = "row d-flex flex-row flex-nowrap overflow-auto">      
        <% for(let k = i; k < series.length; k += 1) { %>
          <div class = "col">
            <!-- Item one-->
            <div class="card cardSize">
              <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(series[k].artwork_filename) { %>
                style="background-image:url(<%=series[k].artwork_filename%>)"
                <% } %>
                action ='/'> 
                    <img class="card-img-top w-auto">
                  <a href="/series/<%=series[k].id%>" role="button" class="btn btn-primary mx-auto" type="submit">View</a>                  
              </form>
              <div class="card-body">
                <h5 class="card-title"><%=series[k].name%></h5>
                <p class="card-text"><%= truncateDescription(series[k].description)%></p>
              </div>
            </div>
          </div>
        <% } %> 
        </div> 
      </div>      
    </div> 
  </div>                                 
<% break; %>  
<% } else if (i + 5 < series.length) { %>
<% i += 5 %>
<div class="carousel-item carouselDiv
<% if (i===5) {%>
  active
<% } %>
">
  <div class="d-flex justify-content-center">
    <div class="card-deck pt-3">
      <div class = "row d-flex flex-row flex-nowrap overflow-auto">                     
        <% for(let k = i - 5; k < i; k += 1){ %>
          <div class = "col">
            <!-- Item one-->
            <div class="card cardSize">
              <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(series[k].artwork_filename) { %>
                style="background-image:url(<%=series[k].artwork_filename%>)"
                <% } %>
                action ='/'> 
                    <img class="card-img-top w-auto">
                  <a href="/series/<%=series[k].id%>" role="button" class="btn btn-primary mx-auto" type="submit">View</a>                  
              </form>
              <div class="card-body">
                <h5 class="card-title"><%=series[k].name%></h5>
                <p class="card-text"><%= truncateDescription(series[k].description)%></p>
              </div>
            </div>
          </div>
          <% } %>
        </div> 
      </div>      
    </div> 
  </div>                      
  <% } %>                             
<% } %> 
</div> 
  <div>
    <a class="carousel-newControl-prev align-items-start alignPrevRight" href="#popularSeriesCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon bg-dark" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-newControl-next align-items-start" href="#popularSeriesCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon bg-dark" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>