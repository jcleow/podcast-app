<div class='displayAtMediumBreakpoints'>
  <div class="row mt-3 mb-1">
    <div class="col d-flex justify-content-center">
        <h3>Recommended Episodes For You</h3>
    </div>
  </div>

  <div id="recommendEpisodesCarouselMedium" class="carousel slide mt-5" data-interval="false" data-ride="carousel">

  <div class="carousel-inner">
  <% let i = 0 %>
  <% while(i < episodes.length) { %>
  <% if( i + 3 > episodes.length) { %>    
  <div class="carousel-item carouselDiv
  <% if(i<3) { %>
  active
  <% } %>    
  ">
    <div class="d-flex justify-content-center">
      <div class="card-deck pt-3">
        <div class = "row d-flex flex-row flex-nowrap overflow-auto">      
          <% for(let k = i; k < episodes.length; k += 1) { %>
            <div class = "col">            
              <div class="card cardSize">
                <form class= "artworkDisplay d-flex justify-content-center"      
                  <% if(episodes[k].episode_artwork) { %>
                  style="background-image:url(<%=episodes[k].episode_artwork%>)"
                  <% } else { %>
                  style="background-image:url(<%=episodes[k].album_artwork%>)"  
                  action ='/'>
                  <% } %> 
                      <img class="card-img-top w-auto">
                  <button class= "rounded-circle" type='submit'><i class='fa fa-play ml-2'></i></button>
                  <input type='hidden' name="episode_id" value="<%=episodes[k].podcast_ext_url%>"/>                                  
                </form>
                <div class="card-body">
                <h5 class="card-title"><a href="/series/<%=episodes[k].series_id%>/episode/<%=episodes[k].episode_id%>"><%=episodes[k].name%></a></h5>
                <p class="card-text"><%= truncateDescription(episodes[k].episode_description)%></p>                  
                </div>
              </div>
            </div>
          <% } %> 
          </div> 
        </div>      
      </div> 
    </div>                                 
  <% break; %>  
  <% } else if (i + 3 <= episodes.length) { %>
  <% i += 3 %>
  <div class="carousel-item carouselDiv
  <% if (i === 3) {%>
    active
  <% } %>
  ">
    <div class="d-flex justify-content-center">
      <div class="card-deck pt-3">
        <div class = "row d-flex flex-row flex-nowrap overflow-auto">                     
          <% for(let k = i - 3; k < i; k += 1){ %>
            <div class = "col">
              <!-- Item one-->
              <div class="card cardSize">
                <form class= "artworkDisplay d-flex justify-content-center"      
                <% if(episodes[k].episode_artwork) {%>
                style="background-image:url(<%=episodes[k].episode_artwork%>)"
                <% } else { %>
                style="background-image:url(<%=episodes[k].album_artwork%>)"
                <% } %>
                action ='/'> 
                <button class= "rounded-circle" type='submit'><i class='fa fa-play ml-2'></i></button>
                <input type='hidden' name="episode_id" value="<%=episodes[k].podcast_ext_url%>"/>               
                </form>
                <div class="card-body">
                <h5 class="card-title"><a href="/series/<%=episodes[k].series_id%>/episode/<%=episodes[k].episode_id%>"><%=episodes[k].name%></a></h5>
                <p class="card-text"><%= truncateDescription(episodes[k].episode_description)%></p>
                </div>
              </div>
            </div>
            <% } %>
          </div> 
        </div>      
      </div> 
    </div>                      
    <% } %>                             
  <% } %> 
  </div> 

    <div>
      <a class="carousel-newControl-prev align-items-start alignPrevRight" href="#popularSeriesCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#123C69" class="bi bi-chevron-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
          </svg>
        </span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-newControl-next align-items-start" href="#popularSeriesCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#123C69" class="bi bi-chevron-right" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
          </svg>
        </span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
</div>